<pre>
  <% caller(0).each_with_index do |line, i| %>
    <% parts = line.split(':') %>
    <%= i+1 %> <%= link_to line, "#{parts[0]}#n#{parts[1]}", target: '_blank' %>
  <% end %>
</pre>